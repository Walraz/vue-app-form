(function(B,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue"),require("lodash.set"),require("lodash.get")):typeof define=="function"&&define.amd?define(["exports","vue","lodash.set","lodash.get"],t):(B=typeof globalThis<"u"?globalThis:B||self,t(B.AppForm={},B.Vue,B.set,B.get))})(this,function(B,t,fe,me){"use strict";const H=e=>{const n=t.ref(0),a=t.ref(e),o=t.ref({}),i=window.structuredClone(t.toRaw(e)),m=t.computed(()=>Object.values(o.value)),u=g=>{a.value={...g},n.value++};return{remountForm:n,formData:a,fieldError:o,fieldErrorTexts:m,resetDefaultForm:()=>u(i),validateForm:g=>{o.value={};const f=g.safeParse(a.value);return f.success?(u(f.data),!0):(o.value=Object.entries(f.error.formErrors.fieldErrors).reduce((v,[l,r])=>(r!=null&&r.length&&(v[l]=r[0]),v),{}),!1)},setFormData:u}},K={xs:18,sm:24,md:32,lg:38,xl:46},U={size:String};function W(e,n=K){return t.computed(()=>e.size!==void 0?{fontSize:e.size in n?`${n[e.size]}px`:e.size}:null)}const V=e=>t.markRaw(t.defineComponent(e)),pe=e=>t.markRaw(e);function X(e,n){return e!==void 0&&e()||n}function F(e,n){return e!==void 0?n.concat(e()):n}const G="0 0 24 24",Y=e=>e,N=e=>`ionicons ${e}`,J={"mdi-":e=>`mdi ${e}`,"icon-":Y,"bt-":e=>`bt ${e}`,"eva-":e=>`eva ${e}`,"ion-md":N,"ion-ios":N,"ion-logo":N,"iconfont ":Y,"ti-":e=>`themify-icon ${e}`,"bi-":e=>`bootstrap-icons ${e}`},Z={o_:"-outlined",r_:"-round",s_:"-sharp"},ee={sym_o_:"-outlined",sym_r_:"-rounded",sym_s_:"-sharp"},he=new RegExp("^("+Object.keys(J).join("|")+")"),ge=new RegExp("^("+Object.keys(Z).join("|")+")"),te=new RegExp("^("+Object.keys(ee).join("|")+")"),ve=/^[Mm]\s?[-+]?\.?\d/,be=/^img:/,ye=/^svguse:/,ke=/^ion-/,Ee=/^(fa-(sharp|solid|regular|light|brands|duotone|thin)|[lf]a[srlbdk]?) /,ne=V({name:"QIcon",props:{...U,tag:{type:String,default:"i"},name:String,color:String,left:Boolean,right:Boolean},setup(e,{slots:n}){const{proxy:{$q:a}}=t.getCurrentInstance(),o=W(e),i=t.computed(()=>"q-icon"+(e.left===!0?" on-left":"")+(e.right===!0?" on-right":"")+(e.color!==void 0?` text-${e.color}`:"")),m=t.computed(()=>{let u,s=e.name;if(s==="none"||!s)return{none:!0};if(a.iconMapFn!==null){const f=a.iconMapFn(s);if(f!==void 0)if(f.icon!==void 0){if(s=f.icon,s==="none"||!s)return{none:!0}}else return{cls:f.cls,content:f.content!==void 0?f.content:" "}}if(ve.test(s)===!0){const[f,v=G]=s.split("|");return{svg:!0,viewBox:v,nodes:f.split("&&").map(l=>{const[r,p,y]=l.split("@@");return t.h("path",{style:p,d:r,transform:y})})}}if(be.test(s)===!0)return{img:!0,src:s.substring(4)};if(ye.test(s)===!0){const[f,v=G]=s.split("|");return{svguse:!0,src:f.substring(7),viewBox:v}}let q=" ";const g=s.match(he);if(g!==null)u=J[g[1]](s);else if(Ee.test(s)===!0)u=s;else if(ke.test(s)===!0)u=`ionicons ion-${a.platform.is.ios===!0?"ios":"md"}${s.substring(3)}`;else if(te.test(s)===!0){u="notranslate material-symbols";const f=s.match(te);f!==null&&(s=s.substring(6),u+=ee[f[1]]),q=s}else{u="notranslate material-icons";const f=s.match(ge);f!==null&&(s=s.substring(2),u+=Z[f[1]]),q=s}return{cls:u,content:q}});return()=>{const u={class:i.value,style:o.value,"aria-hidden":"true",role:"presentation"};return m.value.none===!0?t.h(e.tag,u,X(n.default)):m.value.img===!0?t.h("span",u,F(n.default,[t.h("img",{src:m.value.src})])):m.value.svg===!0?t.h("span",u,F(n.default,[t.h("svg",{viewBox:m.value.viewBox||"0 0 24 24"},m.value.nodes)])):m.value.svguse===!0?t.h("span",u,F(n.default,[t.h("svg",{viewBox:m.value.viewBox},[t.h("use",{"xlink:href":m.value.src})])])):(m.value.cls!==void 0&&(u.class+=" "+m.value.cls),t.h(e.tag,u,F(n.default,[m.value.content])))}}}),qe={size:{type:[Number,String],default:"1em"},color:String};function xe(e){return{cSize:t.computed(()=>e.size in K?`${K[e.size]}px`:e.size),classes:t.computed(()=>"q-spinner"+(e.color?` text-${e.color}`:""))}}const Se=V({name:"QSpinner",props:{...qe,thickness:{type:Number,default:5}},setup(e){const{cSize:n,classes:a}=xe(e);return()=>t.h("svg",{class:a.value+" q-spinner-mat",width:n.value,height:n.value,viewBox:"25 25 50 50"},[t.h("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":e.thickness,"stroke-miterlimit":"10"})])}});function Ce(e,n){const a=e.style;for(const o in n)a[o]=n[o]}const z={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0};try{const e=Object.defineProperty({},"passive",{get(){Object.assign(z,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,e),window.removeEventListener("qtest",null,e)}catch{}function we(e){return e.touches&&e.touches[0]?e=e.touches[0]:e.changedTouches&&e.changedTouches[0]?e=e.changedTouches[0]:e.targetTouches&&e.targetTouches[0]&&(e=e.targetTouches[0]),{top:e.clientY,left:e.clientX}}function oe(e){e.stopPropagation()}function Be(e){e.cancelable!==!1&&e.preventDefault()}function _(e){e.cancelable!==!1&&e.preventDefault(),e.stopPropagation()}function $e(e,n,a){const o=`__q_${n}_evt`;e[o]=e[o]!==void 0?e[o].concat(a):a,a.forEach(i=>{i[0].addEventListener(i[1],e[i[2]],z[i[3]])})}function Pe(e,n){const a=`__q_${n}_evt`;e[a]!==void 0&&(e[a].forEach(o=>{o[0].removeEventListener(o[1],e[o[2]],z[o[3]])}),e[a]=void 0)}function _e(e){return e!==Object(e)||e.isComposing===!0||e.qKeyEvent===!0}function Q(e,n){return _e(e)===!0?!1:[].concat(n).includes(e.keyCode)}function Re(e,n=250){let a=!1,o;return function(){return a===!1&&(a=!0,setTimeout(()=>{a=!1},n),o=e.apply(this,arguments)),o}}function re(e,n,a,o){a.modifiers.stop===!0&&oe(e);const i=a.modifiers.color;let m=a.modifiers.center;m=m===!0||o===!0;const u=document.createElement("span"),s=document.createElement("span"),q=we(e),{left:g,top:f,width:v,height:l}=n.getBoundingClientRect(),r=Math.sqrt(v*v+l*l),p=r/2,y=`${(v-r)/2}px`,d=m?y:`${q.left-g-p}px`,k=`${(l-r)/2}px`,L=m?k:`${q.top-f-p}px`;s.className="q-ripple__inner",Ce(s,{height:`${r}px`,width:`${r}px`,transform:`translate3d(${d},${L},0) scale3d(.2,.2,1)`,opacity:0}),u.className=`q-ripple${i?" text-"+i:""}`,u.setAttribute("dir","ltr"),u.appendChild(s),n.appendChild(u);const b=()=>{u.remove(),clearTimeout(x)};a.abort.push(b);let x=setTimeout(()=>{s.classList.add("q-ripple__inner--enter"),s.style.transform=`translate3d(${y},${k},0) scale3d(1,1,1)`,s.style.opacity=.2,x=setTimeout(()=>{s.classList.remove("q-ripple__inner--enter"),s.classList.add("q-ripple__inner--leave"),s.style.opacity=0,x=setTimeout(()=>{u.remove(),a.abort.splice(a.abort.indexOf(b),1)},275)},250)},50)}function ae(e,{modifiers:n,value:a,arg:o}){const i=Object.assign({},e.cfg.ripple,n,a);e.modifiers={early:i.early===!0,stop:i.stop===!0,center:i.center===!0,color:i.color||o,keyCodes:[].concat(i.keyCodes||13)}}const Le=pe({name:"ripple",beforeMount(e,n){const a=n.instance.$.appContext.config.globalProperties.$q.config||{};if(a.ripple===!1)return;const o={cfg:a,enabled:n.value!==!1,modifiers:{},abort:[],start(i){o.enabled===!0&&i.qSkipRipple!==!0&&i.type===(o.modifiers.early===!0?"pointerdown":"click")&&re(i,e,o,i.qKeyEvent===!0)},keystart:Re(i=>{o.enabled===!0&&i.qSkipRipple!==!0&&Q(i,o.modifiers.keyCodes)===!0&&i.type===`key${o.modifiers.early===!0?"down":"up"}`&&re(i,e,o,!0)},300)};ae(o,n),e.__qripple=o,$e(o,"main",[[e,"pointerdown","start","passive"],[e,"click","start","passive"],[e,"keydown","keystart","passive"],[e,"keyup","keystart","passive"]])},updated(e,n){if(n.oldValue!==n.value){const a=e.__qripple;a!==void 0&&(a.enabled=n.value!==!1,a.enabled===!0&&Object(n.value)===n.value&&ae(a,n))}},beforeUnmount(e){const n=e.__qripple;n!==void 0&&(n.abort.forEach(a=>{a()}),Pe(n,"main"),delete e._qripple)}}),se={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},Te=Object.keys(se),Ae={align:{type:String,validator:e=>Te.includes(e)}};function Oe(e){return t.computed(()=>{const n=e.align===void 0?e.vertical===!0?"stretch":"left":e.align;return`${e.vertical===!0?"items":"justify"}-${se[n]}`})}function Fe(e){return e.appContext.config.globalProperties.$router!==void 0}function je(e){return e.isUnmounted===!0||e.isDeactivated===!0}function ie(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}function le(e,n){return(e.aliasOf||e)===(n.aliasOf||n)}function Me(e,n){for(const a in n){const o=n[a],i=e[a];if(typeof o=="string"){if(o!==i)return!1}else if(Array.isArray(i)===!1||i.length!==o.length||o.some((m,u)=>m!==i[u]))return!1}return!0}function ue(e,n){return Array.isArray(n)===!0?e.length===n.length&&e.every((a,o)=>a===n[o]):e.length===1&&e[0]===n}function Ve(e,n){return Array.isArray(e)===!0?ue(e,n):Array.isArray(n)===!0?ue(n,e):e===n}function ze(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const a in e)if(Ve(e[a],n[a])===!1)return!1;return!0}const De={to:[String,Object],replace:Boolean,exact:Boolean,activeClass:{type:String,default:"q-router-link--active"},exactActiveClass:{type:String,default:"q-router-link--exact-active"},href:String,target:String,disable:Boolean};function Ie({fallbackTag:e,useDisableForRouterLinkProps:n=!0}={}){const a=t.getCurrentInstance(),{props:o,proxy:i,emit:m}=a,u=Fe(a),s=t.computed(()=>o.disable!==!0&&o.href!==void 0),q=n===!0?t.computed(()=>u===!0&&o.disable!==!0&&s.value!==!0&&o.to!==void 0&&o.to!==null&&o.to!==""):t.computed(()=>u===!0&&s.value!==!0&&o.to!==void 0&&o.to!==null&&o.to!==""),g=t.computed(()=>q.value===!0?L(o.to):null),f=t.computed(()=>g.value!==null),v=t.computed(()=>s.value===!0||f.value===!0),l=t.computed(()=>o.type==="a"||v.value===!0?"a":o.tag||e||"div"),r=t.computed(()=>s.value===!0?{href:o.href,target:o.target}:f.value===!0?{href:g.value.href,target:o.target}:{}),p=t.computed(()=>{if(f.value===!1)return-1;const{matched:h}=g.value,{length:S}=h,C=h[S-1];if(C===void 0)return-1;const P=i.$route.matched;if(P.length===0)return-1;const R=P.findIndex(le.bind(null,C));if(R>-1)return R;const D=ie(h[S-2]);return S>1&&ie(C)===D&&P[P.length-1].path!==D?P.findIndex(le.bind(null,h[S-2])):R}),y=t.computed(()=>f.value===!0&&p.value!==-1&&Me(i.$route.params,g.value.params)),d=t.computed(()=>y.value===!0&&p.value===i.$route.matched.length-1&&ze(i.$route.params,g.value.params)),k=t.computed(()=>f.value===!0?d.value===!0?` ${o.exactActiveClass} ${o.activeClass}`:o.exact===!0?"":y.value===!0?` ${o.activeClass}`:"":"");function L(h){try{return i.$router.resolve(h)}catch{}return null}function b(h,{returnRouterError:S,to:C=o.to,replace:P=o.replace}={}){if(o.disable===!0)return h.preventDefault(),Promise.resolve(!1);if(h.metaKey||h.altKey||h.ctrlKey||h.shiftKey||h.button!==void 0&&h.button!==0||o.target==="_blank")return Promise.resolve(!1);h.preventDefault();const R=i.$router[P===!0?"replace":"push"](C);return S===!0?R:R.then(()=>{}).catch(()=>{})}function x(h){if(f.value===!0){const S=C=>b(h,C);m("click",h,S),h.defaultPrevented!==!0&&S()}else m("click",h)}return{hasRouterLink:f,hasHrefLink:s,hasLink:v,linkTag:l,resolvedLink:g,linkIsActive:y,linkIsExactActive:d,linkClass:k,linkAttrs:r,getLink:L,navigateToRouterLink:b,navigateOnClick:x}}const ce={none:0,xs:4,sm:8,md:16,lg:24,xl:32},Ke={xs:8,sm:10,md:14,lg:20,xl:24},Ne=["button","submit","reset"],Qe=/[^\s]\/[^\s]/,He=["flat","outline","push","unelevated"],Ue=(e,n)=>e.flat===!0?"flat":e.outline===!0?"outline":e.push===!0?"push":e.unelevated===!0?"unelevated":n,We={...U,...De,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,...He.reduce((e,n)=>(e[n]=Boolean)&&e,{}),square:Boolean,round:Boolean,rounded:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...Ae.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean};function Xe(e){const n=W(e,Ke),a=Oe(e),{hasRouterLink:o,hasLink:i,linkTag:m,linkAttrs:u,navigateOnClick:s}=Ie({fallbackTag:"button"}),q=t.computed(()=>{const d=e.fab===!1&&e.fabMini===!1?n.value:{};return e.padding!==void 0?Object.assign({},d,{padding:e.padding.split(/\s+/).map(k=>k in ce?ce[k]+"px":k).join(" "),minWidth:"0",minHeight:"0"}):d}),g=t.computed(()=>e.rounded===!0||e.fab===!0||e.fabMini===!0),f=t.computed(()=>e.disable!==!0&&e.loading!==!0),v=t.computed(()=>f.value===!0?e.tabindex||0:-1),l=t.computed(()=>Ue(e,"standard")),r=t.computed(()=>{const d={tabindex:v.value};return i.value===!0?Object.assign(d,u.value):Ne.includes(e.type)===!0&&(d.type=e.type),m.value==="a"?(e.disable===!0?d["aria-disabled"]="true":d.href===void 0&&(d.role="button"),o.value!==!0&&Qe.test(e.type)===!0&&(d.type=e.type)):e.disable===!0&&(d.disabled="",d["aria-disabled"]="true"),e.loading===!0&&e.percentage!==void 0&&Object.assign(d,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.percentage}),d}),p=t.computed(()=>{let d;e.color!==void 0?e.flat===!0||e.outline===!0?d=`text-${e.textColor||e.color}`:d=`bg-${e.color} text-${e.textColor||"white"}`:e.textColor&&(d=`text-${e.textColor}`);const k=e.round===!0?"round":`rectangle${g.value===!0?" q-btn--rounded":e.square===!0?" q-btn--square":""}`;return`q-btn--${l.value} q-btn--${k}`+(d!==void 0?" "+d:"")+(f.value===!0?" q-btn--actionable q-focusable q-hoverable":e.disable===!0?" disabled":"")+(e.fab===!0?" q-btn--fab":e.fabMini===!0?" q-btn--fab-mini":"")+(e.noCaps===!0?" q-btn--no-uppercase":"")+(e.dense===!0?" q-btn--dense":"")+(e.stretch===!0?" no-border-radius self-stretch":"")+(e.glossy===!0?" glossy":"")+(e.square?" q-btn--square":"")}),y=t.computed(()=>a.value+(e.stack===!0?" column":" row")+(e.noWrap===!0?" no-wrap text-no-wrap":"")+(e.loading===!0?" q-btn__content--hidden":""));return{classes:p,style:q,innerClasses:y,attributes:r,hasLink:i,linkTag:m,navigateOnClick:s,isActionable:f}}const{passiveCapture:w}=z;let T=null,A=null,O=null;const de=V({name:"QBtn",props:{...We,percentage:Number,darkPercentage:Boolean,onTouchstart:[Function,Array]},emits:["click","keydown","mousedown","keyup"],setup(e,{slots:n,emit:a}){const{proxy:o}=t.getCurrentInstance(),{classes:i,style:m,innerClasses:u,attributes:s,hasLink:q,linkTag:g,navigateOnClick:f,isActionable:v}=Xe(e),l=t.ref(null),r=t.ref(null);let p=null,y,d=null;const k=t.computed(()=>e.label!==void 0&&e.label!==null&&e.label!==""),L=t.computed(()=>e.disable===!0||e.ripple===!1?!1:{keyCodes:q.value===!0?[13,32]:[13],...e.ripple===!0?{}:e.ripple}),b=t.computed(()=>({center:e.round})),x=t.computed(()=>{const c=Math.max(0,Math.min(100,e.percentage));return c>0?{transition:"transform 0.6s",transform:`translateX(${c-100}%)`}:{}}),h=t.computed(()=>{if(e.loading===!0)return{onMousedown:M,onTouchstart:M,onClick:M,onKeydown:M,onKeyup:M};if(v.value===!0){const c={onClick:C,onKeydown:P,onMousedown:D};if(o.$q.platform.has.touch===!0){const E=e.onTouchstart!==void 0?"":"Passive";c[`onTouchstart${E}`]=R}return c}return{onClick:_}}),S=t.computed(()=>({ref:l,class:"q-btn q-btn-item non-selectable no-outline "+i.value,style:m.value,...s.value,...h.value}));function C(c){if(l.value!==null){if(c!==void 0){if(c.defaultPrevented===!0)return;const E=document.activeElement;if(e.type==="submit"&&E!==document.body&&l.value.contains(E)===!1&&E.contains(l.value)===!1){l.value.focus();const I=()=>{document.removeEventListener("keydown",_,!0),document.removeEventListener("keyup",I,w),l.value!==null&&l.value.removeEventListener("blur",I,w)};document.addEventListener("keydown",_,!0),document.addEventListener("keyup",I,w),l.value.addEventListener("blur",I,w)}}f(c)}}function P(c){l.value!==null&&(a("keydown",c),Q(c,[13,32])===!0&&A!==l.value&&(A!==null&&j(),c.defaultPrevented!==!0&&(l.value.focus(),A=l.value,l.value.classList.add("q-btn--active"),document.addEventListener("keyup",$,!0),l.value.addEventListener("blur",$,w)),_(c)))}function R(c){l.value!==null&&(a("touchstart",c),c.defaultPrevented!==!0&&(T!==l.value&&(T!==null&&j(),T=l.value,p=c.target,p.addEventListener("touchcancel",$,w),p.addEventListener("touchend",$,w)),y=!0,d!==null&&clearTimeout(d),d=setTimeout(()=>{d=null,y=!1},200)))}function D(c){l.value!==null&&(c.qSkipRipple=y===!0,a("mousedown",c),c.defaultPrevented!==!0&&O!==l.value&&(O!==null&&j(),O=l.value,l.value.classList.add("q-btn--active"),document.addEventListener("mouseup",$,w)))}function $(c){if(l.value!==null&&!(c!==void 0&&c.type==="blur"&&document.activeElement===l.value)){if(c!==void 0&&c.type==="keyup"){if(A===l.value&&Q(c,[13,32])===!0){const E=new MouseEvent("click",c);E.qKeyEvent=!0,c.defaultPrevented===!0&&Be(E),c.cancelBubble===!0&&oe(E),l.value.dispatchEvent(E),_(c),c.qKeyEvent=!0}a("keyup",c)}j()}}function j(c){const E=r.value;c!==!0&&(T===l.value||O===l.value)&&E!==null&&E!==document.activeElement&&(E.setAttribute("tabindex",-1),E.focus()),T===l.value&&(p!==null&&(p.removeEventListener("touchcancel",$,w),p.removeEventListener("touchend",$,w)),T=p=null),O===l.value&&(document.removeEventListener("mouseup",$,w),O=null),A===l.value&&(document.removeEventListener("keyup",$,!0),l.value!==null&&l.value.removeEventListener("blur",$,w),A=null),l.value!==null&&l.value.classList.remove("q-btn--active")}function M(c){_(c),c.qSkipRipple=!0}return t.onBeforeUnmount(()=>{j(!0)}),Object.assign(o,{click:C}),()=>{let c=[];e.icon!==void 0&&c.push(t.h(ne,{name:e.icon,left:e.stack===!1&&k.value===!0,role:"img","aria-hidden":"true"})),k.value===!0&&c.push(t.h("span",{class:"block"},[e.label])),c=F(n.default,c),e.iconRight!==void 0&&e.round===!1&&c.push(t.h(ne,{name:e.iconRight,right:e.stack===!1&&k.value===!0,role:"img","aria-hidden":"true"}));const E=[t.h("span",{class:"q-focus-helper",ref:r})];return e.loading===!0&&e.percentage!==void 0&&E.push(t.h("span",{class:"q-btn__progress absolute-full overflow-hidden"+(e.darkPercentage===!0?" q-btn__progress--dark":"")},[t.h("span",{class:"q-btn__progress-indicator fit block",style:x.value})])),E.push(t.h("span",{class:"q-btn__content text-center col items-center q-anchor--skip "+u.value},c)),e.loading!==null&&E.push(t.h(t.Transition,{name:"q-transition--fade"},()=>e.loading===!0?[t.h("span",{key:"loading",class:"absolute-full flex flex-center"},n.loading!==void 0?n.loading():[t.h(Se)])]:null)),t.withDirectives(t.h(g.value,S.value,E),[[Le,L.value,void 0,b.value]])}}});let Ge=[];function Ye(e){Ge.length===0&&e()}const Je="_q_fo_",Ze=V({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(e,{slots:n,emit:a}){const o=t.getCurrentInstance(),i=t.ref(null);let m=0;const u=[];function s(r){const p=typeof r=="boolean"?r:e.noErrorFocus!==!0,y=++m,d=(b,x)=>{a("validation"+(b===!0?"Success":"Error"),x)},k=b=>{const x=b.validate();return typeof x.then=="function"?x.then(h=>({valid:h,comp:b}),h=>({valid:!1,comp:b,err:h})):Promise.resolve({valid:x,comp:b})};return(e.greedy===!0?Promise.all(u.map(k)).then(b=>b.filter(x=>x.valid!==!0)):u.reduce((b,x)=>b.then(()=>k(x).then(h=>{if(h.valid===!1)return Promise.reject(h)})),Promise.resolve()).catch(b=>[b])).then(b=>{if(b===void 0||b.length===0)return y===m&&d(!0),!0;if(y===m){const{comp:x,err:h}=b[0];if(h!==void 0&&console.error(h),d(!1,x),p===!0){const S=b.find(({comp:C})=>typeof C.focus=="function"&&je(C.$)===!1);S!==void 0&&S.comp.focus()}}return!1})}function q(){m++,u.forEach(r=>{typeof r.resetValidation=="function"&&r.resetValidation()})}function g(r){r!==void 0&&_(r);const p=m+1;s().then(y=>{p===m&&y===!0&&(e.onSubmit!==void 0?a("submit",r):r!==void 0&&r.target!==void 0&&typeof r.target.submit=="function"&&r.target.submit())})}function f(r){r!==void 0&&_(r),a("reset"),t.nextTick(()=>{q(),e.autofocus===!0&&e.noResetFocus!==!0&&v()})}function v(){Ye(()=>{if(i.value===null)return;const r=i.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||i.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||i.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(i.value.querySelectorAll("[tabindex]"),p=>p.tabIndex>-1);r!=null&&r.focus({preventScroll:!0})})}t.provide(Je,{bindComponent(r){u.push(r)},unbindComponent(r){const p=u.indexOf(r);p>-1&&u.splice(p,1)}});let l=!1;return t.onDeactivated(()=>{l=!0}),t.onActivated(()=>{l===!0&&e.autofocus===!0&&v()}),t.onMounted(()=>{e.autofocus===!0&&v()}),Object.assign(o.proxy,{validate:s,resetValidation:q,submit:g,reset:f,focus:v,getValidationComponents:()=>u}),()=>t.h("form",{class:"q-form",ref:i,onSubmit:g,onReset:f},X(n.default))}}),et={class:t.normalizeClass("row q-col-gutter-lg")},tt=t.defineComponent({__name:"AppForm",props:{wrapperComponent:{default:()=>"div"},layoutSlots:{default:()=>1},colGutter:{default:()=>"sm"},modelValue:{},modelSchema:{},schema:{},actionButtonProps:{default:()=>({})}},emits:["submit","update:modelValue","reset"],setup(e,{emit:n}){const a=e,o=t.ref(),{resetDefaultForm:i,validateForm:m,formData:u,fieldError:s}=H(a.modelValue);t.watch(u,r=>n("update:modelValue",r),{deep:!0});const q=r=>me(u.value,r),g=(r,p)=>{fe(u.value,p.scope,p!=null&&p.transform?p==null?void 0:p.transform(r):r),s.value[p.scope]&&m(a.modelSchema)},f=()=>{m(a.modelSchema),m(a.modelSchema)&&n("submit",t.toRaw(u.value))},v=()=>{var r;i(),(r=o.value)==null||r.resetValidation(),n("reset")},l=r=>({bind:{...r.componentProps,modelValue:q(r.scope),error:!!s.value[r.scope],errorMessage:s.value[r.scope]||""},on:{"update:modelValue":p=>g(p,r)}});return(r,p)=>(t.openBlock(),t.createBlock(t.unref(Ze),{onSubmit:f,greedy:"",onReset:v,ref_key:"form",ref:o},{default:t.withCtx(()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(r.wrapperComponent),null,{default:t.withCtx(()=>[t.createElementVNode("div",et,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(r.layoutSlots,y=>(t.openBlock(),t.createElementBlock("div",{class:"col",key:y},[t.createElementVNode("div",{class:t.normalizeClass(`row q-col-gutter-${r.colGutter}`)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(r.schema.filter(d=>{const k=d.layoutSlot||1;return k>r.layoutSlots?y===1:k===y}),d=>(t.openBlock(),t.createElementBlock("div",{key:d.scope,class:t.normalizeClass(`col-${d.cols||"auto"}`)},[t.renderSlot(r.$slots,d.scope,{props:{setterScope:g,getterScope:q,scope:d.scope,...l(d)}},()=>[(t.openBlock(),t.createBlock(t.resolveDynamicComponent(d.component),t.mergeProps(l(d).bind,t.toHandlers(l(d).on)),null,16))])],2))),128))],2)]))),128))])]),_:3})),t.renderSlot(r.$slots,"actions",{props:{bind:{...r.actionButtonProps}}},()=>[t.createVNode(de,t.mergeProps(r.actionButtonProps,{type:"reset"}),{default:t.withCtx(()=>[t.createTextVNode("Töm")]),_:1},16),t.createVNode(de,t.mergeProps(r.actionButtonProps,{type:"submit",color:"primary"}),{default:t.withCtx(()=>[t.createTextVNode("Spara")]),_:1},16)])]),_:3},512))}});B.AppForm=tt,B.useForm=H,Object.defineProperty(B,Symbol.toStringTag,{value:"Module"})});
